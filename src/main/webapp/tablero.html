<!DOCTYPE>
<html>
  <head>
    <title>Apalabrados</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- Font Awesome Icons -->
    <!--link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"-->

    <!--BOOTSTRAP-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Tablero CSS -->
    <link rel="stylesheet" type="text/css" href="css/tablero.css">

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      <script type="text/javascript" src="./js/myscript.js"></script>

  </head>

  <body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">APALABRADOS</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="#">Crear partida</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Unirse a partida</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Desconectar</a>
          </li>
        </ul>
      </div>
    </nav>







    <!-- CONTENEDOR GENERAL TABLERO -->
    <div class="container">
      <div class="row" data-bind="visible : shouldShowTablero">
        <!-- COLUMNA 1 DEL GRID -->
        <div class="col-4">

          <div class="controlPanel">
            <!-- FILA COMPONENTES CUENTA ATRAS -->
            <div class="row">
              <div class="col-12" style="text-align:center">
              </br></br>
                <button type="button" onclick="initializeClock('clockdiv',deadline)">Empezar turno</button>
              </div>
            </div>

            <div class="row">
              <div class="col-12" style="text-align:center">
                </br>
                <div id="clockdiv">
                  <div>
                    <span class="minutes"></span>
                    <div class="smalltext">Minutes</div>
                  </div>
                  <div>
                    <span class="seconds"></span>
                    <div class="smalltext">Seconds</div>
                  </div>
                </div>
                <br><br>
              </div>
            </div>
            </br>
            <!-- FILA COMPONENTES TIEMPO Y PUNTUACIONES -->
            <div class="row">
              <div class="col-12">
                <table class="table" style="text-align:center">
                  <thead>
                    <tr>
                      <th/>JUGADOR</th>
                      <th/>PUNTUACIONES              <img src=".\iconos\info.png"/></th>

                    </tr>
                  </thead>
                    <tbody>
                    <tr>
                      <td/>Raquel Ramos</td>
                      <td/>15</td>
                    </tr>
                    <tr>
                      <td/>Adrian Nikolev</td>
                      <td/>30</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="row">
            </br></br></br>
            </div>
            <!-- FILA COMPONENTES FICHAS JUGADOR -->
            <div class="row">
              <div class="col-12">
                  <div class="letters-wrapper">
                    <!-- ko using : tablero -->
                    <ul class="letters">
                      Panel:
                      <!-- ko foreach : panel -->
                      <li> data-bind="html : $data, click : function() { $parent.seleccionar($data); }"></li>
                      <!-- /ko -->
                      </ul>
                      <br>
                      <button data-bind="click : jugar">Jugar</button>
                    <!-- /ko -->
                </div>
              </div>
            </div>
            <!-- FILA COMPONENTES BOTONES JUGADAS -->
            <div class="row">
              <div class="col-12">
                <img src="./img/shelf.jpg" width="100%"/>
              </div>
            </div>

          <div id="botonera">
            <div class="row">
              <div class="col-12">
                <div class="buttons-wrapper">
                  <ul class="buttons">
                      <li><button type="button" class="btn btn-primary" title="Comprobar"><img src="./iconos/check.png" /></button></li>
                      <li><button type="button" class="btn btn-primary" title="Llamar"><img src="./iconos/back.png" /></button></li>
                      <li><button type="button" class="btn btn-primary" title="Cambiar"><img src="./iconos/change.png"/></button></li>
                      <li><button type="button" class="btn btn-primary" title="Mezclar"><a id='shuffle'><img src="./iconos/mix.png"/></a></button></li>
                      <li><button type="button" class="btn btn-primary" title="Pasar"><img src="./iconos/pass.png"/></button></li>
                      <li><button type="button" class="btn btn-primary" title="Rendirse"><img src="./iconos/flag.png"/></button></li>
                  </ul>
              </div>
          </div>
          </div>
        </div>

          </div>
        </div>

        <!-- COLUMNA 2 DEL GRID -->
        <div class="col-8">
          <!-- TABLERO -->
          <table id="board" class="scrabble-table mdl-shadow--24dp" width="100%">
                  <tbody>
                    <!-- ko using : tablero -->
                      <!-- ko foreach : { data: casillas, as: 'fila' } -->
                      <tr>
                        <!-- ko foreach : { data: fila, as: 'celda' } -->
                          <!-- ko using : celda -->
                          <td data-bind="class : clazz, click : seleccionar">
                            <label data-bind="html : letter"></label>
                          </td>
                          <!-- /ko -->
                        <!-- /ko -->
                      </tr>
                      <!-- /ko -->
                    <!-- /ko -->
                  </tbody>
                </table>
        </div>
      </div>
    </div>
  </body>


<script type="text/javascript">
var spacing = 0;
var offset = 50;
var count = 0;
var positions = [];

// First of all, lets absolutely position our elements

$("ul.letters li").css('float', 'none').css('position','absolute');

// As the size of the surrounding element will collapse, give it a fixed height:

$("ul.letters").css('height', '40px')
$("ul.letters li").each(function(){

    // One by one, create a position for each
    the_position = spacing + "px";

    // Add the position to an array
    positions.push(the_position);

    // Everything was absolutely positioned: so give the left property the correct distance
    $(this).css('left', the_position);

    // Store this letter's origianl position for reset
    $(this).attr('data-origin', the_position);

    // Increment the spacing by the specified amount from earlier
    spacing += offset;

    // Next letter, increase the count!
    count ++;
});


$("#shuffle").click(function()
{
  // Duplicate array so we don't mess with the original here
  var shuffled_positions = positions.slice(0);

  // Use the cool fisherYates method of randomly ordering the new array (see later on)
  var shuffled_positions = fisherYates(shuffled_positions);

  // For each letter...
  $("ul.letters li").each(function(){

    // Animate
    $(this).animate({
      // The left distance, to the first element in the array
      left: shuffled_positions[0]
    });

    // Remove the 'used' position from the array
    shuffled_positions.splice(0, 1);
  });
});

// When you click restore...
$("#restore").click(function()
{
  // For each letter
  $("ul.letters li").each(function(){
    // Get its original position (set earlier and stored in the html)
    var pos = $(this).attr('data-origin');
    // Animate
    $(this).animate({
      // It's left distance
      left: pos
    });
  });
});

//this is some cool algorithm that is recommended
function fisherYates ( myArray ) {
    var i = myArray.length;
    if ( i == 0 ) return false;
    while ( --i ) {
        var j = Math.floor( Math.random() * ( i + 1 ) );
        var tempi = myArray[i];
        var tempj = myArray[j];
        myArray[i] = tempj;
        myArray[j] = tempi;
    }
    return myArray;
}
</script>
</html>
